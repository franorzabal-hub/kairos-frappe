apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: kairos-base

namespace: kairos

resources:
  # Namespace
  - namespace.yaml

  # Storage
  - pvc.yaml

  # Configuration
  - configmap.yaml
  - secrets.yaml

  # Database & Cache
  - deployment-mariadb.yaml
  - deployment-redis.yaml

  # Frappe Services (all-in-one pod for RWO volume compatibility)
  - deployment-frappe.yaml

  # Services
  - services.yaml

  # Ingress
  - ingress.yaml

  # Jobs
  - job-create-site.yaml

commonLabels:
  app.kubernetes.io/part-of: kairos
  app.kubernetes.io/managed-by: kustomize

images:
  - name: frappe/frappe
    newName: gcr.io/kairos-escuela-app/kairos
    newTag: cc150f2
